# Windows Service Check Configuration for SCCM Distribution Point
# Monitors critical services for Distribution Point functionality in Azure cloud environment
# Simplified configuration per Datadog best practices and SCCM recommendations

init_config:

instances:
  # Web Infrastructure Services (IIS) - Critical for Distribution Point
  - services:
      - W3SVC
    tags:
      - role:sccm-distribution-point
      - service_group:sccm-web-infrastructure
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true

  # Windows Infrastructure Services - Critical only
  - services:
      - Winmgmt
      - BITS
    tags:
      - role:sccm-distribution-point
      - service_group:sccm-windows-infrastructure
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true

  # Content Distribution Services - Actively used
  - services:
      - BranchCache
      - PeerDistSvc
    tags:
      - role:sccm-distribution-point
      - service_group:sccm-content-distribution
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true
