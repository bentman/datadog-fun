# Process Check Configuration for SCCM Distribution Point
# Monitors critical processes for Distribution Point functionality

init_config:

instances:
  # IIS Worker Process - Critical for Distribution Point
  - name: w3wp
    search_string: ['w3wp.exe']
    tags:
      - process:iis-worker
      - role:sccm-distribution-point
    thresholds:
      critical: [1, 10]  # At least 1, max 10 processes
      warning: [1, 5]
    
  # WMI Provider Host
  - name: wmiprvse
    search_string: ['wmiprvse.exe']
    tags:
      - process:wmi-provider
      - role:sccm-distribution-point
    thresholds:
      critical: [1, 20]  # At least 1, max 20 processes
      warning: [1, 10]
    
  # IIS Admin Service
  - name: inetinfo
    search_string: ['inetinfo.exe']
    tags:
      - process:iis-admin
      - role:sccm-distribution-point
    thresholds:
      critical: [1, 1]  # Exactly 1 process should be running
      warning: [1, 1]
    
  # WDS Server Process (if PXE enabled)
  - name: wdsserver
    search_string: ['wdsserver.exe']
    tags:
      - process:wds-server
      - role:sccm-distribution-point
    thresholds:
      critical: [0, 1]  # 0 or 1 process (optional service)
      warning: [0, 1]