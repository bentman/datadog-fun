# Windows Service Check Configuration for SCCM Site Server
# Monitors critical SCCM and infrastructure services
# Updated with proper service grouping and tagging per Datadog best practices

init_config:

instances:
  # Core SCCM Site Server Services
  - services:
      - SMS_EXECUTIVE
      - SMS_SITE_COMPONENT_MANAGER
    tags:
      - role:sccm-site-server
      - service_group:sccm-core
      - environment:production
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true

  # Web & Infrastructure Services
  - services:
      - W3SVC
      - Winmgmt
      - WinRM
      - BITS
    tags:
      - role:sccm-site-server
      - service_group:web-infrastructure
      - environment:production
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true

  # Optional SCCM Services (may not be present on all site servers)
  - services:
      - SMS_MP_CONTROL_MANAGER
      - SMS_DP_MONITOR
      - SMS_WSUS_SYNC_MANAGER
      - SMS_WSUS_CONTROL_MANAGER
      - SMS_NOTIFICATION_SERVER
    tags:
      - role:sccm-site-server
      - service_group:sccm-optional
      - environment:production
    windows_service_startup_type_tag: true
    collect_display_name_as_tag: true
    disable_legacy_service_tag: true
